(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{151:function(e,t,r){"use strict";r.r(t);r(61);var s=r(74),o=r(69),n=r(35),c=r(111),a=r(24),i=r(93),l=r(94);function u(e){return 0!==e.indexOf("mapbox://")?"":e.slice("mapbox://".length)}var p=function(e){function t(t){var r=Object.assign({declutter:!0},t);delete r.styleURL,delete r.source,delete r.layers,delete r.accessToken,r.source=new l.a({state:a.a.LOADING,format:new c.a}),e.call(this,r),this.sourceId=t.source,this.layers=t.layers,this.accessToken=t.accessToken,this.fetchStyle(t.styleURL)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.fetchStyle=function(e){var t=this,r=function(e,t){var r=u(e);if(!r)return e;if(0!==r.indexOf("styles/"))throw new Error("unexpected style url: "+e);return"https://api.mapbox.com/styles/v1/"+r.slice("styles/".length)+"?&access_token="+t}(e,this.accessToken);fetch(r).then((function(e){if(!e.ok)throw new Error("unexpected response when fetching style: "+e.status);return e.json()})).then((function(e){t.onStyleLoad(e)})).catch((function(e){t.handleError(e)}))},t.prototype.onStyleLoad=function(e){var t,r,s=this;if(this.layers){for(var o,c={},i=0;i<e.layers.length;++i){var l=e.layers[i];l.source&&(c[l.id]=l.source)}for(var p=0;p<this.layers.length;++p){var h=c[this.layers[p]];if(!h)return void this.handleError(new Error("could not find source for "+this.layers[p]));if(o){if(o!==h)return void this.handleError(new Error("layers can only use a single source, found "+o+" and "+h))}else o=h}t=o,r=this.layers}else r=t=this.sourceId;r||(r=t=Object.keys(e.sources)[0]),e.sprite&&(e.sprite=function(e,t){var r=u(e);if(!r)return e;if(0!==r.indexOf("sprites/"))throw new Error("unexpected sprites url: "+e);return"https://api.mapbox.com/styles/v1/"+r.slice("sprites/".length)+"/sprite?access_token="+t}(e.sprite,this.accessToken));var f=e.sources[t];if("vector"===f.type){var y,d,w,v=this.getSource();v.setUrl((y=f.url,d=this.accessToken,(w=u(y))?"https://{a-d}.tiles.mapbox.com/v4/"+w+"/{z}/{x}/{y}.vector.pbf?access_token="+d:y)),Object(n.b)(this,e,r).then((function(){v.setState(a.a.READY)})).catch((function(e){s.handleError(e)}))}else this.handleError(new Error("only works for vector sources, found "+f.type))},t.prototype.handleError=function(e){console.error(e),this.getSource().setState(a.a.ERROR)},t}(i.a),h=document.cookie.replace(/(?:(?:^|.*;\s*)mapbox_access_token\s*\=\s*([^;]*).*$)|^.*$/,"$1");h||(h=window.prompt("Enter your Mapbox API access token:"),document.cookie="mapbox_access_token="+h+"; expires=Fri, 31 Dec 9999 23:59:59 GMT"),new s.a({target:"map",view:new o.a({center:[0,0],zoom:2}),layers:[new p({accessToken:h,styleURL:"mapbox://styles/mapbox/bright-v9"})]})}},[[151,0]]]);
//# sourceMappingURL=mapbox-layer.js.map